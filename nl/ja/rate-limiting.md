---

copyright:
  years: 2018, 2019
lastupdated: "2019-03-14"

keywords: Bypass, header responses, brute-force login attempts

subcollection: cis

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:DomainName: data-hd-keyref="DomainName"}
{:note: .note}
{:important: .important}
{:deprecated: .deprecated}
{:generic: data-hd-programlang="generic"}

# 速度制限
{:#cis-rate-limiting}

速度制限 (エンタープライズ・プランのみ) は、サービス妨害攻撃、総当たりログイン攻撃や、アプリケーション層をターゲットにしたその他の不正な行為から保護します。

速度制限ルールのタイプを、**「カスタム・ルール」**または **「ログインの保護」**のいずれかから選択します。

## カスタムの速度制限ルールの作成
{:#create-a-custom-rate-limiting-rule}

ルールの内容がわかるルール名を入力します。これはオプション・フィールドです。

**トラフィック一致基準**では、AND 演算を使用します。速度制限の対象の URL を入力し、**同じ IP **からの要求が **秒あたりの要求**に指定した数を超えると、指定したルールがトリガーされます。

**「高度な基準」**オプションでは、一致基準をさらに制限する HTTP メソッド、ヘッダー応答、および起点応答コードを指定できます。 

**「メソッド」**ドロップダウンから値を選択します (デフォルトは ANY)。  

**HTTP 応答ヘッダー**を更新します。**応答ヘッダーを追加**して、起点 Web サーバーから戻されるヘッダーを含めることもできます。 

**HTTP 応答ヘッダー**の下に複数のヘッダーがある場合、_AND_ のブール値ロジックが適用されます。ヘッダーを一致対象から除外するには、_「等しくない」_オプションを使用します。また、各ヘッダーは完全一致である必要があります。ただし、大/小文字の区別は適用されません。
{:note}

**「起点応答コード」**の下で、マッチングする各 HTTP 応答コードの有効な数値を入力します。2 つ以上の応答コードを含める場合は、各値をコンマで区切ります。例えば、`401, 403` と入力すると、これら 2 つのエラー・コードのみがカウントされます。 

### 応答の構成
{:#rate-limiting-configure-response}

リストされているアクションから選択し、タイムアウト期間を指定します。この場合、タイムアウトとはアクションの実行が禁止されるまでの期間のことです。60 秒のタイムアウトは、アクションが 60 秒間適用されることを意味します。

|アクション| 説明|
|------|------------|
|ブロック | しきい値を超えると 429 エラーを発行します|
|チャレンジ | ユーザーは、Google reCaptcha チャレンジに合格しないと進めません。合格すると、要求は受け入れられます。そうでない場合、要求はブロックされます。| 	
|JS チャレンジ |	ユーザーは Javascript チャレンジに合格しないと進めません。合格すると、要求は受け入れられます。そうでない場合、要求はブロックされます。|シミュレート| このオプションを使用して、他のいずれかのオプションをご使用の稼働環境に適用する前に、ルールをテストできます。

**高度な応答**

ルールのしきい値を越えた場合の応答タイプを指定します。 

### バイパス
{:#rate-limiting-bypass}

バイパスによって、URL のセットに対するホワイトリストや例外に相当するものを作成できます。速度制限ルールが適用対象の場合でも、それらの URL にはアクションはトリガーされません。

## ログインの保護
{:#rate-limiting-protect-login}

ログインの保護は、ログイン・ページを総当たり攻撃から保護するための標準ルールを作成します。5 分以内に 5 回を超えるログインを試みるクライアントは 15 分間ブロックされます。 

ルールの名前とログイン URL を入力します。 
