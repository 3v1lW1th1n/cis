---

copyright:
  years: 2018, 2019
lastupdated: "2019-03-14"

keywords: IBM CIS deployment, query strings, HTML files

subcollection: cis

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:DomainName: data-hd-keyref="DomainName"}
{:note: .note}
{:important: .important}
{:deprecated: .deprecated}
{:generic: data-hd-programlang="generic"}

# キャッシングの概念
{:#caching-concepts}

この文書には、キャッシングとそれが IBM CIS デプロイメントに与える影響に関連する概念と定義が記載されています。

## キャッシングとは
{:#what-is-caching}

キャッシングとは、ご使用のエッジ・サーバー上にファイルを保管するプロセスのことであり、それらのファイルをお客様に提供するときの応答時間を改善する目的で行われます。 お客様により近い場所にファイルを保管することにより、データがネットワーク上を流れる時間 (一般に**待ち時間**と呼ばれる) を短縮することができます。

キャッシュされたファイルには有効期限時間である**存続時間 (TTL)** が指定され、この時間を超えるとキャッシュからパージされます。 手動でキャッシュからファイルをパージすることもできます。 キャッシュからファイルが削除されると、CIS はご使用の起点サーバーに戻り、ファイルを再ロードして、最新バージョンでキャッシュを更新します。

キャッシュの設定とキャッシングのオプションについての詳しい説明は、[キャッシングとページ・ルールに関するチュートリアル](/docs/infrastructure/cis?topic=cis-use-page-rules-with-caching)に記載されています。

### キャッシュされるコンテンツとは
{:#what-content-is-cached}

デフォルトでは、**静的ファイル**がキャッシュされます。こうしたファイルとしては、さまざまなタイプのイメージ・ファイルとテキスト・ファイル (非 HTML ファイル) があります。 これらのファイルにはご使用の Web サイトからのファイルだけが含まれ、ソーシャル・ネットワーキング・サイトからのサード・パーティー・リソースなどは含まれません。また、現時点では MIME タイプ別にはキャッシュされません。

### HTML をキャッシュする方法 
{:#how-do-i-cache-html}

HTML ファイルは静的と見なされないため、デフォルトでは HTML ファイルはキャッシュされません。しかし、静的 HTML ファイルと動的 HTML を明確に区別できる場合は、[ページ・ルール機能を使用](/docs/infrastructure/cis?topic=cis-use-page-rules)して HTML ファイルをキャッシュすることは可能です。


## 照会ストリングのソート
{:#query-string-sorting}

**エンタープライズのみ** CIS は、照会ストリングがありその順序が異なる URL を、キャッシュ内で別個のファイルとして扱います。したがって、あるユーザー要求が以下のとおりで、

`/video/123456?title=0&byline=0&portrait=0&color=987654`

さらに別のユーザー要求が以下のとおりである場合、

`/video/123456?byline=0&color=987654&portrait=0&title=0`

キャッシュ内にファイルがある場合でも、CIS は起点に戻ります。

照会ストリングのソートでは、キャッシュのヒットが行われる_前に_ソートされるので、キャッシュのヒット率が高くなります。照会ストリングのソートを有効にするには、**「キャッシング」**ページで切り替えスイッチを使用します。

## 失効コンテンツの提供
{:#serve-stale-content-caching}

サーバーがダウンした場合に、サイトの制限バージョンをオンライン状態のままにします。 コンテンツの有効期限が切れていても、起点サーバーがオフラインの場合は、CIS はキャッシュに入れられたコンテンツを引き続きユーザーに提供します。
