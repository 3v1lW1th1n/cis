---

copyright:
  years: 2018, 2019
lastupdated: "2019-03-14"

keywords: Page Rule Use, Cache-Tag Purge, web content

subcollection: cis

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}


# 管理 CIS 部署以获取最佳性能
{:#manage-your-cis-deployment-for-best-performance}

IBM Cloud Internet Services (CIS) 可为客户提供速度最快的体验，因为它不但可以优化图像，还会将 Web 内容存储在离最终用户尽可能最近的地方。从通过代理传递的边缘服务器装入您的内容（这可降低延迟）。

通过 IBM CIS，您可以使用最佳实践来加快 Web 内容的装入速度，从而进一步提高站点的性能。以下是在 CIS 中提高 Web 内容性能的一些特定最佳实践。

**建议和最佳实践：**

 * 尽可能多地高速缓存静态和半静态 Web 内容
 * 对于事件驱动的内容，使用 API 清除高速缓存
 
## 最佳实践 1：尽可能多地高速缓存静态和半静态内容
{:#best-practice-cache-static-content}

  * 针对静态 HTML Web 页面启用**高速缓存所有内容**
  * 对于偶尔更改的内容，使用保守**生存时间 (TTL)**

### 对于偶尔更改的内容，利用保守 TTL（生存时间）
{:#utilize-conservative-ttl}

如果内容很少发生更改，那么您可以设置保守 TTL 从而尽可能多地利用高速缓存。如果重新验证请求百分比较高，那么可增加内容的 TTL，而不会对客户造成负面影响。通过更有效地使用高速缓存，可提高性能，因为会降低重新验证频率。

### 如何分辨项目是否在高速缓存中？
{:#how-do-i-tell-if-items-are-being-cached}

IBM CIS 在尝试高速缓存对象时会添加响应头 `CF-Cache-Status`。如果高速缓存成功，那么此头的值将使用以下一个关键字来指示其状态：

* **MISS：**资产尚未在高速缓存中，或者 TTL 已到期（也就是，已达到高速缓存控制的最大时效 0）。
* **HIT：**已从高速缓存交付资产。
* **EXPIRED：**已从高速缓存交付资产，但是下一个请求将需要重新验证。
* **REVALIDATED：**已从高速缓存交付资产。TTL 已到期，但是对源的 `If-Modified-Since` 请求指示资产尚未更改。因此，高速缓存中的版本再次被视为有效。

## 最佳实践 2：对于事件驱动的内容，使用 API 来清除高速缓存
{:#best-practice-api-purge-cache}

例如，每次向博客添加新帖子时，都可以使用 API 命令来轻松清除 CIS 高速缓存。事件驱动的内容很常见，要保证不会向用户呈现旧内容，而我们让这件事变得简单。下面列出了立即清除整个全局网络高速缓存的命令。您可以使用我们的高速缓存应用程序，也可以使用 API。

  * 使用 Cache-Tag 清除高速缓存
  * 全局清除高速缓存
  * 按“页面规则”清除高速缓存
  * 使用高级高速缓存功能

### 通过 Cache-Tag 清除高速缓存
{:#purge-cache-by-cache-tag}

Cache-Tag 允许您定义想要清除的内容存储区。这是一种绝佳的方式，可以将通常一起发生更改的对象组合在一起。例如，HTML 博客帖子及其所有图像内容可一起进行标记。也可使用 cache-tag 将仅限移动设备的内容捆绑在一起，这样就可以在将新更新推送至移动域时清除所有内容。

### 全局清除高速缓存
{:#purge-cache-globally}

您还可以选择强制整个高速缓存进行重新验证。您可以重置高速缓存中存储的所有对象，以便将每个请求都路由到源服务器。

### 按“页面规则”清除高速缓存
{:#purge-cache-by-page-rule}

“页面规则”允许您根据正则表达式来清除整个高速缓存。您可以利用预定义的“页面规则”并重新验证针对此“页面规则”的所有命中。每页最多可创建 50 个“页面规则”。

### 使用高级高速缓存功能
{:#use-advanced-caching-features}

**存在 Cookie 时绕过高速缓存：**在“页面规则”中配置此功能，那么只要不存在特定名称的 cookie，就可以提供高速缓存的对象。例如，除非找到指示客户已登录的 `SessionID` cookie，并且因此应显示个性化内容，否则可提供高速缓存版本的主页。
