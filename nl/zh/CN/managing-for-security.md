---
copyright:
  years: 2018
lastupdated: "2018-03-13"
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 管理 IBM CIS 以获取最佳安全性

IBM Cloud Internet Services (CIS) 安全设置包括安全缺省值，旨在避免误报和对流量造成负面影响。但是，这些安全缺省设置不会为每个客户提供最佳安全态势。请执行以下步骤以确保以安全的方式配置您的 CIS 帐户：

**建议和最佳实践：**

* 通过代理和增加模糊来保护源 IP 地址
* 有选择地配置安全级别
* 安全地激活 Web 应用程序防火墙 (WAF)

## 最佳实践 1：保护源 IP 地址

使用 IBM CIS 代理子域时，所有流量都将受到保护，因为我们使用特定于 IBM CIS 的 IP 地址进行主动响应（例如，所有客户机首先连接到 CIS 代理，而源 IP 地址会被隐藏）。

### 对于来自源的所有 HTTP(S) 流量，将 IBM CIS 代理用于所有 DNS 记录

为提高源 IP 地址的安全性，应通过代理传递所有 HTTP(S) 流量。

**看到不同的自己 - 查询不使用代理和使用代理的记录：**

```
$ dig greycloud.theburritobot.com +short
1.2.3.4 (The origin IP address)

$ dig orangecloud.theburritobot.com +short
104.16.22.6 , 104.16.23.6 (CIS IP addresses)
```

### 使用非标准名称来隐藏不通过代理传递的源记录
可通过创建额外的模糊来保护无法通过 IBM CIS 进行代理且仍使用源 IP 地址的任何记录（例如，FTP）。特别是，如果需要无法由 IBM CIS 进行代理的源的记录，请使用非标准名称。例如，代替 `ftp.example.com`，而是使用 `[random word or-random characters].example.com`。此模糊处理降低 DNS 记录的字典扫描公开源 IP 地址的可能性。

### 对于 HTTP 和非 HTTP 流量使用单独的 IP 范围（如果可能）
一些客户对于 HTTP 和非 HTTP 流量使用单独的 IP 范围，从而允许通过代理传递指向其 HTTP IP 范围的所有记录，并使用其他 IP 子网来隐藏所有非 HTTP 流量。

## 最佳实践 2：有选择地配置安全级别
您的**安全级别**确定 **IP 声誉数据库**的敏感度。IBM CIS 每月会看到来自 700 多万个 Web 站点的 10 亿多个唯一 IP 地址，这使我们的系统能够识别恶意行动者并阻止他们访问您的 Web 资产。为避免负作用或误报，请按域配置**安全级别**以在需要位置提高安全性，并在适合时降低安全性。

### 将敏感区域的安全级别提高到“高”
您可以通过为管理页面或登录页面添加**页面规则**来增加此设置，从而减少暴力攻击尝试：

1. 使用 API 的 URL 模式创建**页面规则**（例如，`www.example.com/wp-login`）。 
2. 找到**安全级别**设置。
3. 将设置标记为**高**。
4. 选择**供应资源**。

### 降低非敏感路径或 API 的安全级别以减少误报
对于常规页面和 API 流量，可以降低此设置： 

1. 使用 API 的 URL 模式创建**页面规则**（例如，`www.example.com/api/*`）。
2. 找到**安全级别**设置。
3. 将“安全级别”设为**低**或**基本关闭**。
4. 选择**供应资源**。

### “安全级别”设置意味着什么？
“安全级别”设置与特定 IP 地址从网络上的恶意行为获取的威胁评分保持一致。高于 10 的威胁评分被视为高。

* **高**：如果威胁评分大于 0，将进行质询。
* **中**：如果威胁评分大于 14，将进行质询。
* **低**：如果威胁评分大于 24，将进行质询。
* **基本关闭**：如果威胁评分大于 49，将进行质询。

建议您定期检查“安全级别”设置，并且您可在[《CIS 设置的最佳实践》文档](best-practices.html)中找到指示信息

## 最佳实践 3：安全地激活 Web 应用程序防火墙 (WAF)
**安全**部分中提供 WAF。我们将按照相反顺序遍历这些设置，从而确保将 WAF 配置为尽可能安全，然后再在整个域中启用。这些初始设置通过使用 WAF 事件填充“流量应用程序”来进一步优化，从而减少误报。WAF 将自动进行更新以处理发现的新漏洞。

WAF 保护您免受以下类型的攻击：
* SQL 注入攻击
* 跨站点脚本编制
* 跨站点伪造

WAF 包含一个缺省规则集，该规则集包含用于停止最常见攻击的规则。此时，我们允许您启用或禁用 WAF。请参阅[《WAF 缺省规则集》](waf-rule-set.html)文档，以了解有关缺省规则集和每个规则的行为的更多详细信息。

有关 WAF 的更多信息，请参阅[《WAF 概念》文档](waf-concept.html)

## 最佳实践 4：配置 TLS 设置
IBM CIS 提供一些用于加密流量的选项。作为逆向代理，我们在数据中心中关闭 TLS 连接，并打开与源服务器的新 TLS 连接。

TLS 提供四种操作方式：
* **关闭**：在此方式下禁用 TLS，建议不要这样做。
* **客户机到边缘**：TLS 加密从 CIS 到客户机的流量，但是不加密从 CIS 到源服务器的流量。
* **端到端灵活**：TLS 加密所有流量；但是，您可以使用自签名证书来保护 CIS 和源服务器之间的流量。
* **端到端 CA 签名**：TLS 加密所有浏览；您必须使用 CA 签名的证书。

有关 TLS 选项的更多详细信息，请参阅[此文档](ssl-options.html)。

IBM CIS 允许您使用定制证书，也可以使用由 CIS 为您供应的通配符证书。

### 上传定制证书
您可以通过单击**添加证书**按钮并输入证书、专用密钥和捆绑方法来上传自己的定制证书。如果上传自己的证书，那么可获取加密流量的即时兼容性，并保持对证书的控制（例如，扩展验证 (EV) 证书）。请记住，如果上传定制证书，那么您将负责管理证书。例如，IBM CIS 不会跟踪证书到期日期。 

![custom-certificate](images/upload-custom-certificate.png)

### 利用供应的证书
IBM 已与多个认证中心 (CA) 合作，为客户提供域通配符证书。设置这些证书可能需要手动验证。您的支持团队可以帮助您执行这些额外的步骤。
