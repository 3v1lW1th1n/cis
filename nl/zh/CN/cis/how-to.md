---
copyright:
  years: 2018
lastupdated: "2018-03-17"
---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}

# 管理 IBM Cloud Internet Services (CIS) 部署

通过使用“概述”屏幕作为操作的基础开始管理。此屏幕显示部署的所有当前参数。

设置 DNS 并对其进行配置后，可马上开始管理！

## 使用“概述”屏幕

通过使用“概述”屏幕，可以查看所有选择的状态。您可以直接从“概述”屏幕更改设置，只需单击要更改的设置的带下划线的名称，例如，可以单击`负载均衡器`字段来添加负载均衡器。

在“概述”屏幕上，可能会看到域名配置处于**暂挂**状态或处于**活动**状态，如下图中所示。

![概述屏幕图像](images/overview-screen-configuration-summary.png)


## 配置和管理 DNS

转至 DNS 页面并添加记录（最有可能是 A 记录）。输入有关 DNS 记录的信息，然后单击`添加记录`以实施更改。

![添加 DNS](images/dns/create-a-type-record.png)

## 设置和管理高速缓存

接下来，可设置高速缓存。 

![图像](images/caching-screen.png)

您可以从高速缓存屏幕下拉菜单中选择三种类型的高速缓存： 

 * 无查询字符串：不存在查询字符串时，仅从高速缓存中提供资源。
 * 独立于字符串查询：将相同资源提供给所有对象时不考虑查询字符串。（注：**忽略查询字符串**设置仅适用于静态文件扩展名。此设置在生成高速缓存键时会除去查询字符串，以便 `style.css?something` 的请求在从高速缓存处理时会规范化为 `style.css`。）
 * 依赖于查询字符串：每次查询字符串更改时，都提供不同的资源。
  
## 清除高速缓存
 
通过在清除高速缓存字段中输入 URL 即可清除高速缓存以随时准备更新。可以清除单个文件或多个文件（一次最多清除 30 个）。
 
 ## 浏览器到期时间
 
您可以使用下拉菜单来选择需要的浏览器到期时间，例如 8 小时或 1 天。
 
 ## 使用开发方式
 
**开发方式**用于需要主要更新或上传新文件时，或者不希望最终用户从高速缓存进行操作，而是直接从源服务器检索文件时。要开始使用**开发方式**，请将开关切换到`已启用`位置。要停止使用**开发方式**，请将开关切换到`已禁用`位置。**开发方式**将在 3 小时后自动到期。 

## 管理页面规则
 
最多可启用 50 个页面规则。使用下拉菜单配置页面规则。规则设置分为三个类别：**安全性**、**性能**和**可靠性**。

请注意，启用某些规则时，如果这些选项与您刚才选择的其他规则相冲突，那么其他选项将灰显。选择所需的“页面规则”后，单击**供应**以将其启用。新规则将立即生效，并且可以在“页面规则”屏幕中立即查看这些规则。
 
 ![页面规则菜单](images/page-rule-dropdown-settings.png)
 
还可以从“页面规则”屏幕中显示的表启用或禁用“页面规则”。请参阅[使用页面规则](using-page-rules.html)以获取更多信息。
 
 ## 安全性设置
 
缺省情况下，对启用了代理的任何 DNS 记录启用 DDoS 保护，这可以从 DNS 页面上的**记录**表完成。使用切换打开 WAF。打开或关闭规则时，将立即应用更改。

![图像](images/ddos-waf-ssl-screen.png)

## 证书

部署到区域时，IBM CIS 将自动为该区域部署通用证书。因此，您不需要执行任何操作，就可以在该区域中获得基于证书的保护。需要时，可以上传自己的证书。针对每个区域，将需要单独的证书，如果您要上传的证书与您的区域不匹配，那么将看到一条错误消息。

![图像](images/certificates-table.png)
 
 ## 设置和配置负载均衡器
 
 IBM CIS 提供全局负载均衡作为一项服务。

![图像](images/glb-screen.png)

### GLB 仪表板
在仪表板上，将看到三个列表，其中显示负载均衡器、源池和运行状况检查。这些列表显示新的或更新的全局负载均衡器，在供应或更新其中一个组件后还会显示此组件。最初列表为空，并且在创建负载均衡器之前，必须执行一些操作。

#### 创建
**注**：<sup>`*`</sup> 指示此步骤是可选的

1) <sup>`*`</sup>创建运行状况检查，操作是单击“创建运行状况检查”。
  ![图像](images/glb-health-check-list.png)
    <ul>
      <li>* **路径**：对其进行运行状况检查的端点路径。</li> 
      <li>* **类型**：要用于运行状况检查的协议。</li>
      <li>* **描述**：用户提供的描述。</li>
    </ul>

2) 创建池，操作是单击“创建池”。
  ![图像](images/glb-pool-list.png)
    <ul>
      <li>* **运行状况**：池的状态。</li>
      <li>* **名称**：用户提供的名称。</li>
      <li>* **源**：池中运行正常的源的计数。</li>
      <li>* **运行状况检查**：附加的运行状况检查（如果有）的路径。</li>
    </ul>

3) 创建负载均衡器，操作是单击“创建负载均衡器”。
  ![图像](images/glb-load-balancer-list.png)
    <ul>
      <li>* **运行状况**：负载均衡器的状态。</li>
      <li>* **主机名**：在域名之前添加的名称。</li>
      <li>* **可用池**：运行正常的池的计数。</li>
      <li>* **TTL**：生存时间。</li>
      <li>* **代理**：启用或禁用代理流量。</li>
      <li>* **状态**：启用或禁用负载均衡器。</li>
    </ul>

#### 编辑/删除
要编辑或删除负载均衡器或其某个组件，请单击位于每行最右侧的溢出菜单按钮。

“溢出”菜单按钮：

![图像](images/overflow.png)

为每个列表提供了以下选项。

* 运行状况检查
    * **编辑运行状况检查**：此选项会将用户重定向到编辑流程。 
    * **删除运行状况检查**：此选项会显示删除流的确认对话框。

* 池
    * **查看池详细信息**：此选项将显示包含有关池的信息的模态对话框。
    * **编辑池**：此选项会将用户重定向到编辑流。
    * **删除池**：此选项会显示删除流的确认对话框。

* 负载均衡器
    * **启用/禁用**：启用或禁用负载均衡器。
    * **编辑负载均衡器**：重定向到编辑流。 
    * **删除负载均衡器**：显示删除流的确认对话框。

### 添加运行状况检查

运行状况检查是源池的可选附件。此检查使用定制重复时间间隔来探测特定响应主体或状态码，以监视池的运行状况。创建了运行状况检查后，就可以将其添加至新的源池或现有源池。

创建运行状况检查时，只有一个字段是必需的：
 * **响应代码**：运行状况检查的预期 HTTP 响应代码或代码范围。此值必须在 200 到 299 之间，通配符由“x ”表示。

其他可选字段：
 * **路径**：对其执行运行状况检查的端点路径（缺省为 /）。
 * **类型**：要用于运行状况检查的协议（缺省为 HTTP）。
 * **描述**：运行状况检查描述。
 * **时间间隔**：每次运行状况检查之间的时间间隔（秒）。较短的时间间隔可能会缩短故障转移时间，但会增加对源的负载，因为检查来自多个位置（缺省值为 60）。
 * **方法**：要用于运行状况检查的 HTTP 方法（缺省值为 GET）。
 * **超时**：将运行状况检查标记为失败之前的时间（秒），缺省值为 5 秒。
 * **重试次数**：超时时将源标记为运行不正常之前进行重试的次数。立即进行重试（缺省值为 2）。
 * **响应主体**：要在响应主体中匹配的不区分大小写的子字符串。如果未找到此字符串，那么会将源标记为运行不正常。
 * **请求头**：要在运行状况检查中发送的 HTTP 请求头。缺省情况下，建议设置 Host 头。无法覆盖 `User-Agent` 头。

### 添加池

每个供应的负载均衡器至少需要一个池。池将您的源分组以供负载均衡器使用。

创建池时，以下两个字段是必需的：
 * **名称**：池的短名称（标记）。仅允许字母数字字符、连字符和下划线。
 * **源**：此池中源的列表。如果池本身运行正常，那么定向到此池的流量会在所有当前运行正常的源中均衡分发。

其他可选字段：
 * **描述**：池的可读描述。
 * **已启用**：是否启用（缺省值）此池。已禁用的池不会接收流量，不会进行运行状况检查。禁用池将导致使用该池的任何负载均衡器将故障转移到下一个池（如果有），缺省为 true。
 * **运行正常的源的阈值**：必须处于正常运行状态以供此池处理流量的最大源数。如果运行正常的源的数量小于此数字，那么会将该池标记为运行不正常，并将故障转移到下一个可用池。（缺省值为 1）
 * **运行状况检查区域**：运行状况检查将执行监视的区域。
 * **运行状况检查**：要用于检查此池中源的运行状况检查。（缺省情况下，不进行运行状况检查）
 * **通知电子邮件**：应该接收运行状况通知的电子邮件地址。此地址可以是个别邮箱或邮件列表。

 ### 添加负载均衡器

负载均衡器可使用循环分发在多个源池之间分发代理流量。

创建负载均衡器时，以下字段是必需的：
 * **名称**：要与负载均衡器关联的 DNS 主机名。如果此主机名已作为 DNS 记录存在于 IBM 的 DNS 中，那么负载均衡器会优先，而不会使用 DNS 记录。
 * **缺省池**：池标识的列表。该列表按其故障转移优先级排序。缺省情况下，或没有为给定区域配置区域池时，将使用此处定义的池。

（可选）可以配置以下字段：
 * **代理**：通过 IBM 的性能和度量服务路由流量。
 * **会话亲缘关系**：始终通过同一性能和度量实例进行路由。仅当启用了代理时，此选项才可用。
 * **TTL**：此负载均衡器返回的 IP 地址对应的 DNS 条目的生存时间 (TTL)。此选项仅适用于未代理的负载均衡器，否则缺省为 `Automatic`。
 * **区域池**：针对给定区域，区域或者国家或地区代码到池列表（按其故障转移优先级排序）的映射。未明确定义的任何区域将回退为使用缺省池。
