---

copyright:
  years: 2018, 2019
lastupdated: "2019-03-14"

keywords: origin server, pool implementation, origin servers

subcollection: cis

---

{:shortdesc: .shortdesc} 
{:new_window: target="_blank"} 
{:note: .note}

# 글로벌 로드 밸런서(GLB) 개념
{:#global-load-balancer-glb-concepts}

이 문서에는 글로벌 로드 밸런서(GLB)와 관련된 일부 개념 및 정의와 IBM CIS 배치에 어떻게 영향을 주는지가 포함되어 있습니다.

## 글로벌 로드 밸런서(GLB)
{:#global-load-balancer-cis}

글로벌 로드 밸런서(GLB)는 여러 지역에 위치한 서버 리소스 간의 트래픽을 관리합니다. 웹 트래픽이 서버의 처리 능력을 초과하여 확장되지 않고 대기 시간이 중요하지 않은 경우, 오리진 서버는 웹 사이트의 모든 컨텐츠를 제공할 수 있습니다. GLB는 트래픽이 여러 오리진에 분배되도록 하는 _풀(pool)_ 구현을 활용합니다. 이 풀 기능은 다음을 포함한 많은 이점을 제공합니다.

  * 응답 시간 최소화
  * 중복성을 통한 고가용성 작성
  * 트래픽 처리량 최대화

GLB는 우선순위가 가장 높은 풀로 트래픽을 라우팅하여 오리진 서버에 로드를 분배합니다. 풀 내에 트래픽을 분배하는 방법은 다음 _풀_ 절을 참조하십시오. 기본 풀이 사용 불가능하게 되면 우선순위를 기반으로 하는 목록의 다음 풀에 트래픽이 자동으로 라우팅됩니다.

풀이 특정 지역에 설정된 경우 이 지역의 트래픽이 먼저 지정된 지역의 풀로 전송됩니다. 지정된 지역의 모든 풀이 작동 중지되는 경우에만 트래픽이 기본 풀로 폴백됩니다. 이 경우 대체 풀은 우선순위가 가장 낮은 풀입니다. 

### 작동 방법
{:#how-glb-works}
GLB가 작성되면 로드 밸런서의 이름을 사용하여 DNS 레코드가 자동으로 추가됩니다. 그 다음 GLB는 오리진 IP 주소 중 하나를 DNS 요청을 작성하는 클라이언트로 리턴합니다.

예를 들어, 오리진 풀은 IP 주소 `169.61.244.18`과 `169.61.244.19`를 식별하는 두 개의 오리진으로 작성됩니다. 글로벌 로드 밸런서가 오리진 풀을 사용하여 이름 `glbcust.ibmmo.com`으로 작성된 경우 인터넷의 클라이언트가 다음 명령을 실행할 수 있습니다.
```
$ ping glbcust.ibmom.com
PING glbcust.ibmom.com (169.61.244.18): 56 data bytes
```
이 예제에서 CIS는 다음을 수행했습니다.

    * DNS 레코드 `glbcust.ibmmo.com`을 작성함
    * GLB를 사용하여 DNS 이름을 오리진 풀에서 식별되는 IP 주소 중 하나로 분석함

글로벌 로드 밸런서는 TCP 연결을 종료하지 않습니다.
{:note}

DNS 요소 또는 GLB를 "프록시"로 설정하면 동작이 변경됩니다.
예를 들어, 프록시를 켜고 **보안 > TLS > 모드**를 `끄기`가 아닌 다른 것으로 설정하는 경우 CIS가 TCP 연결을 종료하고 CIS와 제안자 간에 두 번째 연결을 설정합니다.

이 예제에서 CIS는 다음을 수행했습니다.

    * DNS 레코드 `glbcust.ibmmo.com`을 작성함
    * GLB를 사용하여 DNS 이름을 CIS 제공 IP 주소로 분석함
    
이제 `glbcust.ibmmo.com`에 대한 연결이 CIS에 의해 종료되며, HTTPS 인증서는 CIS에 의해 호스팅됩니다(TCP 종료에 필요함).

클라이언트가 애플리케이션에 연결되면 다음과 같은 그림이 표시됩니다.

`[client]<--tls-->[cis]<-->[origin server]`

## 풀
{:#glb-pools}

풀(pool)은 GLB에 연결될 때 트래픽이 지능적으로 라우팅되는 오리진 서버의 그룹입니다. 풀이 정상 상태로 표시되기 위해 사용 가능한 오리진 서버의 최소 수는 사용할 특정 상태 검사와 함께 사용자에 의해 구성될 수 있습니다. 오리진 풀은 특정 지역과 연관되거나 모든 지역에서 이를 사용할 수 있습니다.

### 풀 내 트래픽 분배
{:#distribution-of-traffic-within-a-pool}

기본적으로 모든 트래픽은 라운드 로빈 프로토콜을 사용하여 풀의 오리진에 균등하게 분배됩니다. 이는 프록시가 설정되지 않은 GLB에도 적용됩니다.

가중치로 오리진을 구성할 수 있으며, 프록싱된 GLB의 경우 가중치는 각 오리진 서버가 풀의 다른 오리진에 비해 얼마나 많은 트래픽을 수신하는지 결정합니다. 가중치는 0과 1사이의 숫자로 구성되며, 오리진으로 이동할 트래픽의 부분을 지정합니다. 

각 오리진의 경우: 

` 오리진에 대한 트래픽의 백분율 = 오리진 가중치 / 모든 오리진 가중치의 합`

모든 오리진의 가중치가 `1`인 경우 트래픽이 균등하게 분배됩니다. 

가중치가 `0`인 오리진은 이 풀의 트래픽을 수신하지 않습니다. 하지만 모든 세션이 닫힐 때까지 세션 선호도가 여전히 이를 대체할 수 있습니다. 오리진이 다른 풀의 멤버인 경우 해당 풀에 대한 트래픽을 여전히 수신할 수 있습니다.

**예제:** 

오리진 풀은 가중치가 다음과 같은 세 개의 오리진으로 설정됩니다. 오리진-A: 0.4, 오리진-B: 0.3, 오리진-C: 0.3. 

* 처음에 모든 오리진은 정상입니다. 각 오리진이 수신하는 트래픽의 양은 다음과 같습니다. 오리진-A: 40%, 오리진-B: 30%, 오리진C: 30%.
* 그런 다음 오리진-A는 위험으로 바뀝니다. 더 이상 트래픽을 수신하지 않습니다. 나머지 오리진의 가중치는 같으므로 트래픽은 균등하게 분배되며 각각 50% 를 수신합니다.
* 관리자는 오리진-C의 가중치를 `0`으로 변경합니다. 이제 새 트래픽 100% 가 오리진-B로 이동합니다. 세션 선호도가 켜진 상태에서 오리진-C에 대한 기존 세션의 트래픽은 해당 세션을 닫을 때까지(최대 24시간) 오리진-C로 계속 이동합니다.

### 대체 풀
{:#fallback-pool}

우선순위가 가장 낮은(가장 많은 수) 오리진 풀은 지정된 "대체 풀"입니다. 지정된 지역의 모든 풀이 작동 중지되면 해당 상태에 관계없이 트래픽이 대체 풀로 라우팅됩니다.

모든 풀을 사용하지 않으면 대체 풀을 사용할 수 없습니다.
{:note}

## 상태 검사
{:#cis-health-check}

상태 검사는 트래픽이 정상 상태인 풀로 라우팅될 수 있도록 풀의 가용성을 살펴보는 데 도움이 됩니다. 이러한 검사는 주기적으로 HTTP, HTTPS 또는 TCP 요청을 전송하고 응답을 모니터링합니다. 이는 사용자 정의된 포트, 간격, 제한시간, 상태 코드 등으로 구성될 수 있습니다. 풀이 비정상으로 표시되면 즉시 트래픽이 지능적으로 사용 가능한 다른 풀로 다시 라우팅됩니다.
CIS를 작동하는 Cloudflare와의 IBM 파트너쉽으로 인해 로그에 Cloudflare에 대한 참조가 포함되어 있는지 확인하십시오.
{:note}

### 상태 검사 이벤트
{:#health-check-events}

상태 검사 이벤트는 상태 검사 및 연관된 오리진 서버가 연결된 풀의 상태 변경입니다. 오리진의 상태가 저하되면 이벤트의 설명과 함께 새 항목이 테이블에 표시됩니다. **안정성 > 글로벌 로드 밸런서 > 상태 검사 이벤트**로 이동하여 상태 검사 이벤트 테이블을 확인하십시오. 드롭 다운 메뉴에서 필터 매개변수를 선택하여 날짜, 풀 또는 오리진의 상태, 풀 이름 및 오리진 이름으로 필터링할 수 있습니다. 열 이름을 클릭하여 테이블 내 열을 정렬할 수 있습니다.
![상태 검사 이벤트 테이블](images/health-check-events-table.png)

테이블 내 개별 행은 항목에 대한 자세한 정보로 확장됩니다. 풀이 정상이면 **풀 세부사항** 타일만 표시됩니다. 행에 위험 상태의 오리진 또는 성능 저하된 풀이 있는 경우 **영향을 받은 오리진 세부사항** 타일도 나타납니다. 

![상태 검사 이벤트 세부사항](images/health-check-events-details.png)

#### 풀 세부사항:
* 풀 이름 - 풀의 이름
* 정상 오리진 - 정상 오리진 수/풀의 총 오리진 수의 비율
* 정상 임계값 - 풀이 정상이라고 판단하기 위해 정상이어야 하는 오리진의 수
* 정상 오리진 - 정상 오리진의 이름
* 위험한 오리진 - 비정상 오리진의 이름

#### 영향을 받은 오리진 세부사항:
* 오리진 이름 - 오리진의 이름
* 오리진 주소 - 오리진의 주소
